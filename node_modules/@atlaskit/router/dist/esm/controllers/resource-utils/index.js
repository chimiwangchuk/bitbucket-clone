import { __awaiter, __generator, __read, __spread } from "tslib";
import { DEFAULT_RESOURCE_MAX_AGE } from '../resource-store/constants';
var handleGetDataLoader = function (asyncImport) {
    return function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return __awaiter(void 0, void 0, void 0, function () {
            var getDataFn;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, asyncImport()];
                    case 1:
                        getDataFn = (_a.sent()).default;
                        return [2 /*return*/, getDataFn.apply(void 0, __spread(args))];
                }
            });
        });
    };
};
export function createResource(args) {
    return {
        type: args.type,
        getKey: args.getKey,
        getData: args.getDataLoader
            ? handleGetDataLoader(args.getDataLoader)
            : args.getData,
        maxAge: typeof args.maxAge === 'number' ? args.maxAge : DEFAULT_RESOURCE_MAX_AGE,
    };
}
//# sourceMappingURL=index.js.map